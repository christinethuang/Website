"0","#LASSO regression"
"0","library(glmnet)"
"2","Loading required package: Matrix
"
"2","
Attaching package: ‘Matrix’

"
"2","The following objects are masked from ‘package:tidyr’:

    expand, pack, unpack

"
"2","Loaded glmnet 3.0-2

"
"0","y<-as.matrix(crime$age)"
"0","x<-crime%>%select(-age,-gender,-race,-state,-cause,-armed,-age_c)%>%mutate_all(scale)%>%as.matrix #to remove variables that were not numeric/continuous but to also keep the rest of the variables that were numeric "
"0","#head(x)"
"0",""
"0","#Simplest Model from lambda"
"0","cv<-cv.glmnet(x,y) "
"0","lasso<-glmnet(x,y,lambda=cv$lambda.1se) "
"0","coef(lasso)"
"1","5 x 1 sparse Matrix of class ""dgCMatrix""
"
"1","                  "
"1","            s0"
"1","
(Intercept)       "
"1","  3.723059e+01"
"1","
household_quintile"
"1","  .           "
"1","
poverty_rate      "
"1"," -1.775509e-16"
"1","
unemployment_rate "
"1","  .           "
"1","
college           "
"1","  .           "
"1","
"
"0","#Perform 10-fold CV with continuous numeric variables"
"0","set.seed(1234)"
"0","k=10 #choose number of folds"
"0",""
"0","data1<-crime[sample(nrow(crime)),]  "
"0","folds<-cut(seq(1:nrow(crime)),breaks=k,labels=F)"
"0",""
"0","diags<-NULL "
"0","for(i in 1:k){"
"0","  train<-data1[folds!=i,] "
"0","  test<-data1[folds==i,]"
"0","  "
"0","  fit<-lm(age~poverty_rate,data=train) "
"0","  yhat<-predict(fit,newdata=test)"
"0","  "
"0","  diags<-mean((test$age-yhat)^2) "
"0","}"
"0",""
"0","mean(diags)"
"1","[1]"
"1"," 168.8088"
"1","
"
"0","summary(fit)"
"1","
Call:
"
"1",""
"1","lm(formula = age ~ poverty_rate, data = train)"
"1",""
"1","

"
"1",""
"1","Residuals:
"
"1","    Min "
"1","     1Q "
"1"," Median "
"1","     3Q "
"1","    Max "
"1","
"
"1","-22.327 "
"1"," -9.575 "
"1"," -1.948 "
"1","  7.727 "
"1"," 48.150 "
"1","
"
"1","
Coefficients:
"
"1","            "
"1"," Estimate"
"1"," Std. Error"
"1"," t value"
"1"," Pr(>|t|)"
"1","    "
"1","
(Intercept) "
"1"," 39.55873"
"1","    1.21375"
"1","  32.592"
"1","   <2e-16"
"1"," ***"
"1","
poverty_rate"
"1"," -0.10903"
"1","    0.04807"
"1","  -2.268"
"1","   0.0239"
"1"," *  "
"1","
"
"1","---
Signif. codes:  "
"1",""
"1","
"
"1","0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1"
"1","
"
"1","
Residual standard error:"
"1"," "
"1","12.69"
"1"," "
"1","on"
"1"," "
"1","392"
"1"," "
"1","degrees of freedom"
"1","
"
"1","Multiple R-squared: "
"1"," "
"1","0.01296"
"1",",	Adjusted R-squared: "
"1"," "
"1","0.01044"
"1"," "
"1","
F-statistic:"
"1"," "
"1","5.145"
"1"," "
"1","on"
"1"," "
"1","1"
"1"," "
"1","and"
"1"," "
"1","392"
"1"," "
"1","DF,  p-value:"
"1"," "
"1","0.02385"
"1","
"
"1","
"
